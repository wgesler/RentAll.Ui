@if (!(isLoading$ | async)) {
  <div class="flex content-card-wrap justify-center" fxLayout="row wrap">
    <section class="content-card">
      <div class="flex justify-between items-center gap-3 bg-slate-300 rounded-t-lg py-0 pl-8 pr-4">
        <span class="flex flex-column items-center gap-3 py-4">
          <mat-icon class="flex-shrink-0">people</mat-icon>
          <span class="flex-shrink-0 text-xl font-medium">Users</span>
        </span>
      </div>
      <mat-card>
        <div class="mat">
          <!-- Office dropdown row - just above data table -->
          <div class="flex justify-between items-center gap-3 mt-4 px-4 flex-wrap" style="height: 56px;">
            <div class="flex items-center gap-3" style="height: 56px;">
              @if (showOfficeDropdown) {
                <mat-form-field appearance="outline" class="office-dropdown">
                  <mat-label>{{ selectedOffice ? 'Office' : 'All Offices' }}</mat-label>
                  <mat-select [(ngModel)]="selectedOffice" (selectionChange)="onOfficeChange()" [ngModelOptions]="{ standalone: true }" placeholder="All Offices">
                    <mat-option [value]="null">All Offices</mat-option>
                    @for (office of offices; track office.officeId) {
                      <mat-option [value]="office">{{ office.name }}</mat-option>
                    }
                  </mat-select>
                </mat-form-field>
              }
            </div>
          </div>
          <div class="tableDiv">
            <app-data-table
              [data]="usersDisplay"
              [columns]="usersDisplayedColumns"
              [hasColumnIndex]="false"
              [hasFilter]="true"
              [hasToggleTop]="true"
              [hasButtonTop]="true"
              [hasActionsRowClick]="true"
              [hasActionsEdit]="true"
              [hasActionsDelete]="true"
              [itemsPerPage]="100"
              [buttonToggleTextTop]="'Inactive'"
              [buttonTextTop]="'Add'"
              [buttonIconTop]="'add'"
              [buttonColorTop]="'primary'"
              (topToggleButtonEvent)="toggleInactive()"
              (topButtonEvent)="addUser()"
              (editEvent)="goToUser($event)"
              (rowClickEvent)="goToUser($event)"
              (deleteEvent)="deleteUser($event)"/>
          </div>
        </div>
      </mat-card>
    </section>
  </div>
}

