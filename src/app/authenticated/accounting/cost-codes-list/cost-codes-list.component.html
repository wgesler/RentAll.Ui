@if (embeddedInSettings && isEditingCostCodes && costCodesId) {
  <app-cost-codes
    [id]="costCodesId"
    [officeId]="costCodesOfficeId"
    [source]="'accounting'"
    (backEvent)="onCostCodesBack()"
    (savedEvent)="onCostCodesSaved()">
  </app-cost-codes>
} @else if (!(isLoading$ | async)) {
  <div class="mat list-layout-tabbed">
    @if (showInactiveInput === undefined) {
      <!-- Office dropdown row -->
      @if (showOfficeDropdown) {
        <div class="list-top-controls list-top-controls--tabbed flex gap-4 items-center mt-3 px-4">
          <mat-form-field appearance="outline" style="width: 300px;">
            <mat-label>{{ selectedOffice ? 'Office' : 'All Offices' }}</mat-label>
            <mat-select [(ngModel)]="selectedOffice" (selectionChange)="onOfficeChange()" placeholder="All Offices">
              <mat-option [value]="null">All Offices</mat-option>
              @for (office of offices; track office.officeId) {
                <mat-option [value]="office">{{ office.name }}</mat-option>
              }
            </mat-select>
          </mat-form-field>
        </div>
      }
    }
    <!-- Filter and data table below -->
    <div class="tableDiv table-filter-row-actions-wrap table-filter-row-actions-wrap--compact">
      @if (showInactiveInput === undefined) {
        <div class="table-filter-row-actions list-top-actions list-top-actions--tabbed flex justify-end items-center gap-5 px-4">
          <mat-slide-toggle id="toggle-cost-codes-inactive" [checked]="showInactive" color="primary" (change)="toggleInactive()" class="whitespace-nowrap">
            Inactive
          </mat-slide-toggle>
          <button mat-raised-button type="button" color="primary" id="add-cost-code-button" (click)="addCostCode()" class="whitespace-nowrap items-center flex gap-1">
            <mat-icon class="text-base">add</mat-icon>
            <span>Add</span>
          </button>
        </div>
      }
      <app-data-table
        [data]="costCodesDisplay"
        [columns]="costCodesDisplayedColumns"
        [hasColumnIndex]="false"
        [hasFilter]="true"
        [hasToggleTop]="false"
        [hasActionsRowClick]="true"
        [hasActionsEdit]="true"
        [hasActionsDelete]="true"
        [rowColorColumn]="'rowColor'"
        [defaultRowColor]="'#fafafa'"
        [itemsPerPage]="100"
        (editEvent)="goToCostCode($event)"
        (rowClickEvent)="goToCostCode($event)"
        (deleteEvent)="deleteCostCode($event)"/>
    </div>
  </div>
} @else {
  <div class="loading-container">
    <mat-spinner [diameter]="40"></mat-spinner>
    <p>Loading cost codes...</p>
  </div>
}
