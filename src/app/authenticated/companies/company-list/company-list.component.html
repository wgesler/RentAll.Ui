@if (!(isLoading$ | async)) {
  <div class="mat">
    <!-- Office dropdown row - just above data table -->
    @if (showOfficeDropdown) {
      <div class="flex gap-3 items-center mt-3 px-4">
        <mat-form-field appearance="outline" class="office-dropdown">
          <mat-label>{{ selectedOffice ? 'Office' : 'All Offices' }}</mat-label>
          <mat-select [(ngModel)]="selectedOffice" (selectionChange)="onOfficeChange()" [ngModelOptions]="{ standalone: true }" placeholder="All Offices">
            <mat-option [value]="null">All Offices</mat-option>
            @for (office of offices; track office.officeId) {
              <mat-option [value]="office">{{ office.name }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
      </div>
    }
    <div class="tableDiv">
      <app-data-table
        [data]="companiesDisplay"
        [columns]="companiesDisplayedColumns"
        [hasColumnIndex]="false"
        [hasFilter]="true"
        [hasToggleTop]="true"
        [hasButtonTop]="true"
        [hasActionsRowClick]="true"
        [hasActionsEdit]="true"
        [hasActionsCopy]="true"
        [hasActionsDelete]="true"
        [itemsPerPage]="100"
        buttonToggleTextTop="Inactive"
        buttonTextTop="Add"
        buttonIconTop="add"
        buttonColorTop="primary"
        (topToggleButtonEvent)="toggleInactive()"
        (topButtonEvent)="addCompany()"
        (editEvent)="goToCompany($event)"
        (copyEvent)="copyCompany($event)"
        (rowClickEvent)="goToCompany($event)"
        (deleteEvent)="deleteCompany($event)"/>
    </div>
  </div>
} @else {
  <div class="loading-container">
    <mat-spinner [diameter]="40"></mat-spinner>
    <p>Loading companies...</p>
  </div>
}

